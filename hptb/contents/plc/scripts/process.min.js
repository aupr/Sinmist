var preprocess=function(){plcUserId="admin";plcPassword="";var a="Login="+plcUserId+"&Password="+plcPassword;$.post("/FormLogin",a,function(b){console.log("Access & Login PLC: Success")}).fail(function(){console.log("Access & Login PLC: Failed")});$("body").css({"background-color":"black"});$("nav .logo").css({"background-image":"url('"+server+"contents/images/logo.png')"});isProcess=0;window.onbeforeunload=function(){if(isProcess>0){return true}else{}}};var process=function(){var a={mode:"Auto",process:"Stopped",pipeDia:4,vp:56,nvp:59,frm:555,fru:555,motor:"Stopped",freq:50,rpm:1000,power:30,current:100};viewSystemStatus(a);bindControlBoxButtons()};var mainData=[];var dummyData=[{vo:41,sp:90,dp:87,frm:80,fru:98,men:87,mfq:66},{vo:42,sp:90,dp:87,frm:70,fru:98,men:87,mfq:66},{vo:43,sp:90,dp:87,frm:90,fru:98,men:87,mfq:66},{vo:44,sp:90,dp:87,frm:60,fru:98,men:87,mfq:66}];function updateDataTable(a){a.sort(function(d,c){return d.frm-c.frm});$("#dataViewTable").html("");a.forEach(function(c,b){b=b+1;$("#dataViewTable").append(" <tr><td>"+b+"</td><td>"+c.vo+"</td><td>"+c.sp+"</td><td>"+c.dp+"</td><td>"+c.frm+"</td><td>"+c.fru+"</td><td>"+c.men+"</td><td>"+c.mfq+"</td></tr>")})}function bindControlBoxButtons(){$("#cb-start-process").click(startProcessHit);$("#cb-take-data").click(takeDataHit);$("#cb-emergency").click(emergencyHit)}function cbOptionsDisabled(a){$("input","#processMode").prop("disabled",a);$("#valveOpenBy").prop("disabled",a)}var startProcessHit=function(){$("#cb-start-process").css({display:"none"});$("#cb-take-data").css({display:"block"});cbOptionsDisabled(true)};var takeDataHit=function(){$("#cb-emergency").css({display:"block"});updateDataTable(dummyData);systemLog("Data hit pressed ... ","#system-log");var a='"Control".VFD_Control.Write_To_G120.Start=1';$.get("data.html?"+a,function(b){console.log(b)},"json")};var emergencyHit=function(){$("#cb-emergency").css({display:"none"});$("#cb-start-process").css({display:"block"});cbOptionsDisabled(false);$.get('data.html?"Control".VFD_Control.Write_To_G120.Stop=1',function(a){console.log(a)},"json")};function viewSystemStatus(a){$("#status-mode").html(a.mode);$("#status-process").html(a.process);$("#status-pipe-dia").html(a.pipeDia);$("#status-valve-position").html(a.vp);$("#status-flow-rate-m").html(a.frm);$("#status-flow-rate-u").html(a.fru);$("#status-next-vp").html(a.nvp);$("#status-motor").html(a.motor);$("#status-freq").html(a.freq);$("#status-rpm").html(a.rpm);$("#status-power").html(a.power);$("#status-current").html(a.current)}function scrollUp(a){$(a).scrollTop(a.prop("scrollHeight"))}logLimit=5000;txt="";logNum=0;function systemLog(d,a){a=$(a);logNum++;var c=new Date();var b=c.getFullYear()+"-"+c.getMonth()+1+"-"+c.getDate()+" > "+c.getHours()+":"+c.getMinutes()+":"+c.getSeconds();if(txt===""){txt+=logNum+" > "+b+" > "+d}else{txt+="\r\n"+logNum+" > "+b+" > "+d}var e=txt.split("\r\n");sptLen=e.length;if(sptLen>logLimit){e=e.slice(sptLen-logLimit,sptLen)}txt=e.join("\r\n");a.val(txt);scrollUp(a)};